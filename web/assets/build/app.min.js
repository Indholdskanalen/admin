/**
 * @name Aroskanalen
 * @version v3.3.0
 * @link https://github.com/aroskanalen/admin
 */
angular.module("ikApp",["ngRoute","ngAnimate","angularFileUpload","colorpicker.module","datetimePicker","ngLocale","taiPlaceholder","ngModal","angular.css.injector","itkLog","itkControlPanel","itkScreenTemplatePickerWidget","itkTextWidget","itkTextAreaWidget","itkNumberWidget","itkChannelPickerWidget","itkSharedChannelPickerWidget","itkChannelRemoverWidget","itkRegionPreviewWidget","itkDateComponent","itkDigitalClockComponent"],function(){}).config(["$sceDelegateProvider",function(e){"use strict";e.resourceUrlWhitelist(["self","**"])}]).config(["$provide",function(e){"use strict";e.decorator("$exceptionHandler",["$delegate","$injector",function(e,n){return function(t,i){e(t,i),n.get("itkLog").error(t,i)}}])}]),angular.module("ikApp").config(["$routeProvider",function(e){"use strict";e.when("/",{redirectTo:"/channel-overview"}).when("/admin-sharing",{controller:"AdminSharingController",templateUrl:"app/pages/adminSharing/admin-sharing.html?"+window.config.version}).when("/admin-templates",{controller:"AdminTemplatesController",templateUrl:"app/pages/adminTemplates/admin-templates.html?"+window.config.version}).when("/channel-overview",{controller:"ChannelOverviewController",templateUrl:"app/pages/channelOverview/channel-overview.html?"+window.config.version}).when("/slide-overview",{controller:"SlideOverviewController",templateUrl:"app/pages/slideOverview/slide-overview.html?"+window.config.version}).when("/screen-overview",{controller:"ScreenOverviewController",templateUrl:"app/pages/screenOverview/screen-overview.html?"+window.config.version}).when("/media-overview",{controller:"MediaOverviewController",templateUrl:"app/pages/mediaOverview/media-overview.html?"+window.config.version}).when("/shared-channel-overview",{controller:"SharedChannelOverviewController",templateUrl:"app/pages/sharedChannelOverview/shared-channel-overview.html?"+window.config.version}).when("/screen",{controller:"ScreenController",templateUrl:"app/pages/screen/screen.html?"+window.config.version}).when("/screen/:id",{controller:"ScreenController",templateUrl:"app/pages/screen/screen.html?"+window.config.version}).when("/slide",{controller:"SlideController",templateUrl:"app/pages/slide/slide.html?"+window.config.version}).when("/slide/:id",{controller:"SlideController",templateUrl:"app/pages/slide/slide.html?"+window.config.version}).when("/shared-channel/:id/:index",{controller:"SharedChannelController",templateUrl:"app/pages/sharedChannel/shared-channel.html?"+window.config.version}).when("/channel",{controller:"ChannelController",templateUrl:"app/pages/channel/channel.html?"+window.config.version}).when("/channel/:id",{controller:"ChannelController",templateUrl:"app/pages/channel/channel.html?"+window.config.version}).when("/media/upload",{controller:"MediaUploadController",templateUrl:"app/pages/mediaUpload/media-upload.html?"+window.config.version}).when("/media/:id",{controller:"MediaEditController",templateUrl:"app/pages/mediaEdit/media-edit.html?"+window.config.version}).otherwise({redirectTo:"/"})}]),angular.module("ikApp").controller("AdminSharingController",["$scope","sharedChannelFactory","itkLog",function(e,n,t){"use strict";e.saving=!1,e.availableIndexes=[],n.getAvailableIndexes().then(function(n){n.forEach(function(n){"shared"===n.tag&&e.availableIndexes.push(n)})},function(e){t.error("Hentning af tilgængelige delingsindeks fejlede.",e)}),e.chosenIndexes=[],n.getSharingIndexes().then(function(n){e.chosenIndexes=n},function(e){t.error("Hentning af valgte delingsindeks fejlede.",e)}),e.save=function(){e.saving=!0,n.saveSharingIndexes(e.chosenIndexes).then(function(){t.info("Delingsindeks gemt",3e3),e.saving=!1},function(n){t.error("Delingsindeks blev ikke gemt",n),e.saving=!1})}}]),angular.module("ikApp").controller("AdminTemplatesController",["$scope","templateFactory","itkLog",function(e,n,t){"use strict";e.saving=!1,e.screenTemplates=[],e.slideTemplates=[],e.enabledScreenTemplates=[],e.enabledSlideTemplates=[],n.getAllScreenTemplates().then(function(n){e.screenTemplates=n;for(var t=[],i=0;i<n.length;i++)n[i].enabled&&t.push(n[i]);e.enabledScreenTemplates=t},function(e){t.error("Hentning af tilgængelige templates fejlede.",e)}),n.getAllSlideTemplates().then(function(n){e.slideTemplates=n;for(var t=[],i=0;i<n.length;i++)n[i].enabled&&t.push(n[i]);e.enabledSlideTemplates=t},function(e){t.error("Hentning af tilgængelige templates fejlede.",e)}),e.save=function(){e.saving=!0,n.saveEnabledTemplates(e.enabledScreenTemplates,e.enabledSlideTemplates).then(function(){t.info("Template valg gemt",3e3),e.saving=!1},function(n){t.error("Template valg blev ikke gemt",n),e.saving=!1})}}]),angular.module("ikApp").controller("ChannelController",["$scope","$location","$routeParams","$timeout","channelFactory","slideFactory","itkLog",function(e,n,t,i,r,o,a){"use strict";function l(n){e.step=n,e.templatePath="/app/pages/channel/channel-step"+e.step+".html?"+window.config.version}function s(){t.id?null==t.id||void 0==t.id||""==t.id?n.path("/channel"):r.getEditChannel(t.id).then(function(t){e.channel=t,e.channel.status="edit-channel",e.channel==={}&&n.path("/channel"),l(2)},function(e){n.path("/channel-overview"),a.error("Hentning af valgt kanal med id:"+t.id+" fejlede",e)}):(e.channel=r.emptyChannel(),l(1))}function c(n){return e.channel?""!==e.channel[n]:!1}function d(e,n,t){var i=e[n];e[n]=e[t],e[t]=i}e.steps=3,e.slides=[],e.channel={},e.days=[{id:1,name:"Mandag"},{id:2,name:"Tirsdag"},{id:3,name:"Onsdag"},{id:4,name:"Torsdag"},{id:5,name:"Fredag"},{id:6,name:"Lørdag"},{id:0,name:"Søndag"}],o.getSlides().then(function(n){e.slides=n},function(e){a.error("Hentning af slides fejlede",e)}),e.editor={slideOverviewEditor:!1,toggleSlideOverviewEditor:function(){$("html").toggleClass("is-locked"),e.editor.slideOverviewEditor=!e.editor.slideOverviewEditor}},e.$on("slideOverview.clickSlide",function(n,t){e.toggleSlide(t)}),s(),e.submitStep=function(){e.step==e.steps?(e.disableSubmitButton=!0,r.saveChannel().then(function(){a.info("Kanal gemt.",3e3),i(function(){n.path("/channel-overview")},1e3)},function(n){a.error("Gem af kanal fejlede.",n),e.disableSubmitButton=!1})):l(e.step+1)},e.setOrientation=function(n){e.channel.orientation=n},e.slideSelected=function(n){var t=!1;return e.channel.slides.forEach(function(e){n==e.id&&(t=!0)}),t},e.validation={titleSet:function(){return c("title")},orientationSet:function(){return c("orientation")}},e.toggleSlide=function(n){var t=null;e.channel.slides.forEach(function(e,i,r){n.id==e.id&&(t=i)}),null!==t?e.channel.slides.splice(t,1):e.channel.slides.push(n)},e.goToStep=function(n){var t=1;e.validation.titleSet()&&(t++,e.validation.orientationSet()&&(t+=3)),t>=n&&l(n)},e.pushRight=function(n){n==e.channel.slides.length-1?d(e.channel.slides,n,0):d(e.channel.slides,n,n+1)},e.pushLeft=function(n){0==n?d(e.channel.slides,n,e.channel.slides.length-1):d(e.channel.slides,n,n-1)}}]),angular.module("ikApp").controller("ChannelOverviewController",["$scope","sharedChannelFactory","channelFactory","itkLog",function(e,n,t,i){"use strict";e.shareDialogShow=!1,e.shareDialogChannel=null,window.config.sharingService.enabled&&(e.$on("ikChannelShare.clickShare",function(n,r){e.shareDialogShow=!0,e.shareDialogChannel=r,t.getChannel(r.id).then(function(n){e.shareDialogChannel=n,e.shareDialogChannel.sharing_indexes||(e.shareDialogChannel.sharing_indexes=[])},function(e){i.error("Hentning af kanal fejlede",e)})}),e.sharingIndexes=[],n.getSharingIndexes().then(function(n){e.sharingIndexes=n},function(e){i.error("Hentning af delingsindeks fejlede.",e)}),e.saveSharingChannel=function(){t.channelShare(e.shareDialogChannel).then(function(){i.info("Delingskonfiguration af kanal lykkedes.",3e3)},function(e){i.error("Deling af kanal fejlede.",e)})})}]),angular.module("ikApp").controller("MediaEditController",["$scope","$location","$routeParams","$timeout","mediaFactory","itkLog",function(e,n,t,i,r,o){"use strict";r.getMedia(t.id).then(function(t){e.media=t,e.media==={}&&n.path("/media-overview")},function(e){o.error("Kunne ikke hente media med id: "+t.id,e),n.path("/media-overview")}),e["delete"]=function(){r.deleteMedia(e.media.id).then(function(){o.info("Media slettet.",3e3),i(function(){n.path("/media-overview")},500)},function(e){o.error("Sletning af media fejlede.",e)})},e.getContentType=function(e){if(!e)return"";var n=e.content_type.split("/");return n[0]},e.videoPath=function(e,n){var t="";return e.provider_metadata.forEach(function(e){e.format===n&&(t=e.reference),"thumbnail_landscape"===n&&e.thumbnails.forEach(function(e){"mp4_landscape"===e.label&&(t=e.reference)})}),t}}]),angular.module("ikApp").controller("MediaOverviewController",["$scope","$location",function(e,n){"use strict";e.$on("mediaOverview.selectMedia",function(e,t){n.path("/media/"+t.id)})}]),angular.module("ikApp").controller("MediaUploadController",["$scope",function(e){"use strict";e.$on("mediaUpload.uploadComplete",function(e,n){})}]),angular.module("ikApp").controller("ScreenController",["$scope","$location","$routeParams","screenFactory","channelFactory","sharedChannelFactory","templateFactory","itkLog","$timeout",function(e,n,t,i,r,o,a,l,s){"use strict";function c(){t.id?null===t.id||void 0===t.id||""===t.id?n.path("/screen-overview"):i.getEditScreen(t.id).then(function(t){e.loading=!1,e.screen=t,e.screen.channel_screen_regions.forEach(function(e){e.shared_channel&&(e.shared_channel.content=JSON.parse(e.shared_channel.content),e.shared_channel.title=e.shared_channel.content.title,e.shared_channel.slides=e.shared_channel.content.slides)}),e.screen==={}&&n.path("/screen")},function(e){l.error("Skærmen med id: "+t.id+" blev ikke fundet",e)}):(e.screen=i.emptyScreen(),a.getScreenTemplate("full-screen").then(function(n){e.screen.template=n,e.loading=!1},function(n){404===n&&a.getScreenTemplates().then(function(n){e.screen.template=angular.copy(n[0]),e.screen.orientation=n[0].orientation,e.loading=!1},function(e){l.error("Skabelonerne blev ikke loaded",e)})}))}e.loading=!0,e.sharingEnabled=window.config.sharingService.enabled,e.screen={},e.toolbarTemplate=null,e.display=!1,e.region=null,c(),e.saveScreenAndClose=function(){e.displayToolbar=!1,e.region=null,i.saveScreen().then(function(){l.info("Skærmen er gemt",3e3),s(function(){n.path("/screen-overview")},1e3)},function(e){l.error("Skærmen blev ikke gemt",e)})},e.saveScreen=function(){e.displayToolbar=!1,e.region=null,i.saveScreen().then(function(){l.info("Skærmen er gemt",3e3)},function(e){l.error("Skærmen blev ikke gemt",e)})},e.triggerTool=function(n){e.screen.template.tools.hasOwnProperty(n.name)?e.toolbarTemplate=e.screen.template.tools[n.name]:e.toolbarTemplate="app/shared/toolbars/"+n.name+".html?"+window.config.version,e.region=n.region,e.displayToolbar=!0}}]),angular.module("ikApp").controller("ScreenOverviewController",["$scope","screenFactory","userFactory","itkLog",function(e,n,t,i){"use strict";e.loading=!1,e.showFromUser="mine",e.sort={created_at:"desc"},e.pager={size:6,page:0},e.hits=0,e.screens=[];var r={fields:["title"],text:"",sort:{created_at:{order:"desc"}},pager:e.pager};e.updateSearch=function(){r.text=e.search_text,e.loading=!0,n.searchScreens(r).then(function(t){e.hits=t.hits;for(var r=[],o=0;o<t.results.length;o++)r.push(t.results[o].id);n.loadScreensBulk(r).then(function(n){e.screens=n,e.loading=!1},function(n){i.error("Kunne ikke hente søgeresultater.",n),e.loading=!1})})},e.$on("screen-deleted",function(){e.updateSearch()}),e.setUser=function(n){e.showFromUser!==n&&(e.showFromUser=n,e.setSearchFilters())},e.setSearchFilters=function(){if(delete r.filter,"all"!==e.showFromUser&&(r.filter={bool:{must:[]}}),"all"!==e.showFromUser){var n={};n.term={user:e.currentUser.id},r.filter.bool.must.push(n)}e.updateSearch()},e.setSort=function(n,t){(void 0===e.sort[n]||e.sort[n]!==t)&&(e.sort={},e.sort[n]=t,r.sort={},r.sort[n]={order:t},e.updateSearch())},t.getCurrentUser().then(function(n){e.currentUser=n,e.setSearchFilters()})}]),angular.module("ikApp").controller("SharedChannelController",["$scope","$location","$routeParams","$timeout","screenFactory","sharedChannelFactory","itkLog",function(e,n,t,i,r,o,a){"use strict";function l(n){e.step=n,e.templatePath="/app/pages/sharedChannel/shared-channel-step"+e.step+".html?"+window.config.version}function s(){t.id&&t.index?o.getSharedChannel(t.id,t.index).then(function(t){e.channel=JSON.parse(t.content),e.channel==={}&&n.path("/channel-sharing-overview"),l(1)},function(e){a.error("Delt kanal kunne ikke hentes.",e)}):n.path("/channel-sharing-overview")}e.steps=1,e.step=1,e.channel={},e.channel.slides=[],e.status="edit",r.getScreens().then(function(n){e.screens=n},function(e){a.error("Kunne ikke hente bruger.",e)}),s(),e.submitStep=function(){n.path("/channel-sharing-overview")},e.goToStep=function(e){l(e)}}]),angular.module("ikApp").controller("SharedChannelOverviewController",["$scope",function(e){"use strict"}]),angular.module("ikApp").controller("SlideController",["$scope","$location","$routeParams","$timeout","slideFactory","templateFactory","channelFactory","itkLog",function(e,n,t,i,r,o,a,l){"use strict";function s(n){e.step=n,e.templatePath="/app/pages/slide/slide-step"+e.step+".html?"+window.config.version}function c(){a.getChannels().then(function(n){e.channels=n}),t.id?null===t.id||void 0===t.id||""===t.id?n.path("/slide"):(r.clearCurrentSlide(),r.getEditSlide(t.id).then(function(t){e.slide=t,e.slide.status="edit-slide",e.slide==={}&&n.path("/slide"),s(3)},function(e){l.error("Kunne ikke hente slide med id: "+t.id,e),n.path("/slide-overview")})):(e.slide=r.emptySlide(),e.slide.channels=[],s(1))}function d(n){return e.slide?""!==e.slide[n]:!1}e.steps=5,e.slide={},e.templates=[],o.getSlideTemplates().then(function(n){for(var t in n)n.hasOwnProperty(t)&&e.templates.push(n[t])},function(e){l.error("Kunne ikke hente slide templates.",e)}),e.channels=[],e.editor={channelOverviewEditor:!1,toggleChannelOverviewEditor:function(){$("html").toggleClass("is-locked"),e.editor.channelOverviewEditor=!e.editor.channelOverviewEditor}},e.$on("channelOverview.clickChannel",function(n,t){e.toggleChannel(t)}),c(),e.submitStep=function(){e.step===e.steps?(e.disableSubmitButton=!0,""===e.slide.duration&&(e.slide.duration=15),r.saveSlide().then(function(){l.info("Slide gemt.",3e3),i(function(){n.path("/slide-overview")},1e3)},function(n){l.error("Kunne ikke gemme slide.",n),e.disableSubmitButton=!1})):s(e.step+1)},e.validation={titleSet:function(){return d("title")},templateSet:function(){return d("template")}},e.goToStep=function(n){var t=1;e.validation.titleSet()&&(t++,e.validation.templateSet()&&(t+=3)),t>=n&&s(n)},e.selectTemplate=function(n){e.slide.template=n;var t=null;e.templates.forEach(function(e){e.id===n&&(t=e)}),null!==t&&(e.slide.slide_type=t.slide_type,e.slide.options||(e.slide.options={}),e.slide.orientation=t.orientation,angular.forEach(t.empty_options,function(n,t){void 0===e.slide.options[t]&&(e.slide.options[t]=angular.copy(n))}),""===e.slide.options.headline&&(e.slide.options.headline=e.slide.title),e.slide.media_type=t.media_type)},e.channelSelected=function(n){var t=!1;return e.slide.channels.forEach(function(e){n.id===e.id&&(t=!0)}),t},e.hasChannel=function(n){var t=!1;return e.slide.channels.forEach(function(e){n.id===e.id&&(t=!0)}),t},e.toggleChannel=function(n){var t=null;e.slide.channels.forEach(function(e,i){n.id===e.id&&(t=i)}),null!==t?e.slide.channels.splice(t,1):e.slide.channels.push(n)}}]),angular.module("ikApp").controller("SlideEditController",["$scope","$http","$filter","mediaFactory","slideFactory","kobaFactory","itkLog","templateFactory",function(e,n,t,i,r,o,a,l){"use strict";e.step="background-picker",e.addevent={title:null,place:null,from:null,to:null},r.getEditSlide(null).then(function(n){e.slide=n,l.getSlideTemplate(n.template).then(function(n){e.template=n},function(e){a.error("Kunne ikke loade værktøjer til slidet.",e)})},function(e){a.error("Kunne ikke hente slide.",e)}),e.openTool=function(n){$("html").toggleClass("is-locked"),e.editor.editorOpen?(e.editor.editorOpen=!1,e.editorURL=""):("manual-calendar-editor"===n.id?(e.addevent.title=null,e.addevent.place=null,e.addevent.from=null,e.addevent.to=null,e.sortEvents(),e.validateEvents()):"event-calendar-editor"===n.id&&(e.availableResources=[],o.getResources().then(function(n){if(e.availableResources=n,e.slide.options.hasOwnProperty("resources"))for(var t=[],i=e.slide.options.resources.length,r=0;i>r;r++){for(var o=!1,a=0;a<n.length;a++)if(n[a].mail===e.slide.options.resources[r].mail){o=!0;break}o&&t.push(e.slide.options.resources[r])}e.slide.options.resources=t},function(e){a.error("Kunne ikke hente bookings for ressource",e)})),e.editor.editorOpen=!0,n.path?e.editorURL=n.path:e.editorURL="templates/editors/"+n.id+".html?"+window.config.version)},e.editor={editorOpen:!1,hideEditors:function(){$("html").removeClass("is-locked"),e.editor.editorOpen=!1,e.editorURL=""}},e.clickBackgroundColor=function(){e.slide.options.images=[]},e.addEventItem=function(){var n={title:e.addevent.title,place:e.addevent.place,from:e.addevent.from,to:e.addevent.to};e.slide.options.eventitems.push(n),e.addevent.title=null,e.addevent.place=null,e.addevent.from=null,e.addevent.to=null,n=null},e.removeEventItem=function(n){e.slide.options.eventitems.splice(e.slide.options.eventitems.indexOf(n),1)},e.sortEvents=function(){e.slide.options.eventitems.length>0&&(e.slide.options.eventitems=t("orderBy")(e.slide.options.eventitems,"from"))},e.eventIsOutdated=function(e){var n=e.to,t=e.from,i=Date.now()/1e3;return n&&i>n||!n&&i>t},e.validateEvents=function(){if(e.slide.options.eventitems.length>0)for(var n=0;n<e.slide.options.eventitems.length;n++){var t=e.slide.options.eventitems[n];if(!t.from||t.to){var i=new Date(1e3*t.from),r=new Date(1e3*t.to);return i.getDate()===r.getDate()}t.dailyEvent=!0,e.slide.options.eventitems[n]=t}},e.addCalendarEvents=function(){for(var n=[],t=function(e){for(var t=0;t<e.length;t++){var i=e[t];n.push(i)}},i=0;i<e.slide.options.resources.length;i++){var r=e.slide.options.resources[i],l=new Date,s=new Date(l.getFullYear(),l.getMonth(),l.getDate()).getTime()/1e3,c=s+86400;o.getBookingsForResource(r.mail,s,c).then(t,function(e){a.error("Kunne ikke hente bookings for ressource",e)})}e.slide.calendar_events=n},e.$on("mediaOverview.selectMedia",function(n,t){if("logo"===t.media_type)e.slide.logo=t,e.logoStep="logo-picker";else{var i=!1;e.slide.media.forEach(function(e){e.id===t.id&&(i=!0)}),i?e.slide.media.length=0:(e.slide.media.length=0,e.slide.media.push(t)),e.editor.hideEditors()}}),e.$on("mediaUpload.uploadSuccess",function(n,t){for(var r=!0,o=0;o<t.queue.length;o++){var l=t.queue[o];if(!l.isSuccess){r=!1;break}}r&&i.getMedia(t.id).then(function(n){"logo"===n.media_type?(e.slide.logo=n,e.logoStep="logo-picker"):(e.slide.media.length=0,e.slide.media.push(n),e.editor.hideEditors())},function(e){a.error("Kunne ikke tilføje media.",e)})}),e.step="background-picker",e.backgroundPicker=function(){e.step="background-picker"},e.pickFromMedia=function(){e.step="pick-from-media",e.$emit("mediaOverview.updateSearch")},e.pickFromComputer=function(){e.step="pick-from-computer"},e.logoStep="logo-picker",e.logoPicker=function(){e.logoStep="logo-picker"},e.pickLogoFromMedia=function(){e.logoStep="pick-logo-from-media",e.$emit("mediaOverview.updateSearch")},e.pickLogoFromComputer=function(){e.logoStep="pick-logo-from-computer"},e.logoPositions=[{value:{top:"0",bottom:"auto",left:"0",right:"auto"},text:"top venstre"},{value:{top:"0",bottom:"auto",left:"auto",right:"0"},text:"top højre"},{value:{top:"auto",bottom:"0",left:"0",right:"auto"},text:"bund venstre"},{value:{top:"auto",bottom:"0",left:"auto",right:"0"},text:"bund højre"}],e.logoSizes=[{value:"5%",text:"Meget lille (5% af skærmen)"},{value:"10%",text:"Lille (10% af skærmen)"},{value:"15%",text:"Medium (15% af skærmen)"},{value:"20%",text:"Stor (20% af skærmen)"},{value:"40%",text:"Ekstra stor (40% af skærmen)"}]}]),angular.module("ikApp").controller("SlideOverviewController",["$scope","$location",function(e,n){"use strict";e.$on("slideOverview.clickSlide",function(e,t){n.path("/slide/"+t.id)})}]),angular.module("ikApp").filter("activeEvents",function(){"use strict";return function(e){if(!angular.isArray(e))return!1;for(var n=parseInt(Date.now()/1e3),t=[],i=0;i<e.length;i++){var r=e[i];r.from&&r.to&&r.to>=n?t.push(r):r.from&&r.from>=n&&t.push(r)}return t}}),angular.module("ikApp").filter("reverseEvents",function(){"use strict";return function(e){return angular.isArray(e)?e.slice().reverse():!1}}),angular.module("ikApp").controller("MenuController",["$scope","$rootScope","$location","$http","userFactory","itkLog",function(e,n,t,i,r,o){"use strict";e.url=t.url(),e.navMenuOpen=null,e.subMenuItems=[],e.showMobileMainMenu=!1,e.showSharingOptions=window.config.sharingService.enabled,e.siteTitle=window.config.siteTitle,r.getCurrentUser().then(function(n){e.currentUser=n},function(e){o.error("Hentning af bruger fejlede.",e)});var a=function(){0===e.url.indexOf("/channel")||0===e.url.indexOf("/shared-channel")?(e.subMenuItems=[{title:"Oversigt",path:"channel-overview",classSuffix:"overview"},{title:"Opret kanal",path:"channel",classSuffix:"create-channel"}],e.showSharingOptions&&e.subMenuItems.push({title:"Delte kanaler",path:"shared-channel-overview",classSuffix:"overview"})):0===e.url.indexOf("/slide")?e.subMenuItems=[{title:"Oversigt",path:"slide-overview",classSuffix:"overview"},{title:"Opret slide",path:"slide",classSuffix:"create-channel"}]:0===e.url.indexOf("/screen")?e.subMenuItems=[{title:"Oversigt",path:"screen-overview",classSuffix:"overview"},{title:"Opret skærm",path:"screen",classSuffix:"create-channel"}]:0===e.url.indexOf("/template")?e.subMenuItems=[{title:"Oversigt",path:"template-overview",classSuffix:"overview"},{title:"Opret skabelon",path:"template",classSuffix:"create-channel"}]:0===e.url.indexOf("/media")?e.subMenuItems=[{title:"Oversigt",path:"media-overview",classSuffix:"overview"},{title:"Upload medie",path:"media/upload",classSuffix:"create-media"}]:e.subMenuItems=[]};a(),e.pathStartsWith=function(e,n){var t=e.split("/");if(t.length>=2){e="";for(var i=1;i<t.length;i++)e+=t[i],i<t.length-1&&(e+="/")}return e===n},e.toggleNavMenu=function(){null===e.navMenuOpen&&(e.navMenuOpen=!1),e.navMenuOpen=!e.navMenuOpen,$("html").toggleClass("is-locked")};var l=function(){null===e.navMenuOpen&&(e.navMenuOpen=!1),e.navMenuOpen=!1,$("html").removeClass("is-locked")};n.$on("$locationChangeSuccess",function(){e.url=t.url(),e.navMenuOpen=!1,$("html").removeClass("is-locked"),a(),o.clear()}),e.mobileMainMenuVisible=function(){return 0==e.url.indexOf("/channel")&&0==e.url.indexOf("/slide")&&0==e.url.indexOf("/screen")&&0==e.url.indexOf("/media")},e.updateTemplates=function(){i.get("/api/command/update_templates").success(function(e,n,t,i){o.info("Templates opdateret.",3e3)}).error(function(e,n,t,i){o.error("Update af templates fejlede.",n)}),l()},e.reindex=function(){i.get("/api/command/reindex").success(function(e,n,t,i){o.info("Reindex gennemført.",3e3)}).error(function(e,n,t,i){o.error("Reindex fejlede.",n)}),l()},e.forcePush=function(){i.get("/api/command/forcepush").success(function(e,n,t,i){o.info("Force push gennemført.",3e3)}).error(function(e,n,t,i){o.error("Force push fejlede.",n)}),l()}}]),angular.module("ikApp").factory("authHttpResponseInterceptor",["$q","$location","$window",function(e,n,t){"use strict";return{responseError:function(n){return 401===n.status&&(t.location.href="/login"),e.reject(n)}}}]),angular.module("ikApp").config(["$httpProvider",function(e){"use strict";e.interceptors.push("authHttpResponseInterceptor")}]),angular.module("ikApp").factory("channelFactory",["$http","$q","searchFactory",function(e,n,t){"use strict";var i={},r={};return i.searchChannels=function(e){return e.type="Indholdskanalen\\MainBundle\\Entity\\Channel",t.search(e)},i.getChannels=function(){var t=n.defer();return e.get("/api/channels").success(function(e){t.resolve(e)}).error(function(){t.reject()}),t.promise},i.loadChannelsBulk=function(t){for(var i=n.defer(),r="?",o=0;o<t.length;o++)r=r+"ids[]="+t[o],o<t.length-1&&(r+="&");return e.get("/api/channels/bulk"+r).success(function(e,n){i.resolve(e)}).error(function(e,n){i.reject(n)}),i.promise},i.getEditChannel=function(t){var i=n.defer();return null===t||void 0===t||""===t?i.resolve(r):e.get("/api/channel/"+t).success(function(e){r=e,i.resolve(r)}).error(function(){i.reject()}),i.promise},i.getChannel=function(t){var i=n.defer();return e.get("/api/channel/"+t).success(function(e){i.resolve(e)}).error(function(){i.reject()}),i.promise},i.emptyChannel=function(){return r={id:null,title:"",orientation:"",created_at:parseInt((new Date).getTime()/1e3),slides:[],screens:[],sharing_indexes:[],schedule_repeat_days:[]}},i.saveChannel=function(){var t=n.defer();return e.post("/api/channel",r).success(function(){t.resolve("success"),r=null}).error(function(){t.reject("error")}),t.promise},i.channelShare=function(t){var i=n.defer();return e.post("/api/channel/share",t).success(function(e){i.resolve(e)}).error(function(e,n){i.reject(n)}),i.promise},i}]),angular.module("ikApp").factory("kobaFactory",["$http","$q",function(e,n){"use strict";var t={};return t.getResources=function(){var t=n.defer();return e.get("/api/resources").success(function(e){t.resolve(e)}).error(function(e,n){t.reject(n)}),t.promise},t.getBookingsForResource=function(t,i,r){var o=n.defer();return e.get("/api/resources/"+t+"/bookings/from/"+i+"/to/"+r).success(function(e){o.resolve(e)}).error(function(e,n){o.reject(n)}),o.promise},t}]),angular.module("ikApp").factory("mediaFactory",["$http","$q","searchFactory",function(e,n,t){"use strict";var i={};return i.getAllMedia=function(){var t=n.defer();return e.get("/api/media").success(function(e){t.resolve(e)}).error(function(){t.reject()}),t.promise},i.searchMedia=function(e){return e.type="Application\\Sonata\\MediaBundle\\Entity\\Media",t.search(e)},i.loadMediaBulk=function(t){for(var i=n.defer(),r="?",o=0;o<t.length;o++)r=r+"ids[]="+t[o],o<t.length-1&&(r+="&");return e.get("/api/media/bulk"+r).success(function(e,n){i.resolve(e)}).error(function(e,n){i.reject(n)}),i.promise},i.getMedia=function(t){var i=n.defer();return e.get("/api/media/"+t).success(function(e){i.resolve(e)}).error(function(e,n){i.reject(n)}),i.promise},i.deleteMedia=function(t){var i=n.defer();return e["delete"]("/api/media/"+t).success(function(e){i.resolve(e)}).error(function(e,n){i.reject(n)}),i.promise},i}]),angular.module("ikApp").factory("screenFactory",["$http","$q","searchFactory",function(e,n,t){"use strict";var i={},r=null;return i.searchScreens=function(e){return e.type="Indholdskanalen\\MainBundle\\Entity\\Screen",t.search(e)},i.getScreens=function(){var t=n.defer();return e.get("/api/screens").success(function(e){t.resolve(e)}).error(function(e,n){t.reject(n)}),t.promise},i.loadScreensBulk=function(t){for(var i=n.defer(),r="?",o=0;o<t.length;o++)r=r+"ids[]="+t[o],o<t.length-1&&(r+="&");return e.get("/api/screens/bulk"+r).success(function(e,n){i.resolve(e)}).error(function(e,n){i.reject(n)}),i.promise},i.getEditScreen=function(t){var i=n.defer();return null===t||void 0===t||""===t?i.resolve(r):e.get("/api/screen/"+t).success(function(e){r=e,i.resolve(r)}).error(function(e,n){i.reject(n)}),i.promise},i.getScreen=function(t){var i=n.defer();return e.get("/api/screen/"+t).success(function(e){i.resolve(e)}).error(function(e,n){i.reject(n)}),i.promise},i.saveScreen=function(){var t=n.defer();return null===r?t.reject(404):e.post("/api/screen",r).success(function(e){r.id=e,t.resolve(e)}).error(function(e,n){t.reject(n)}),t.promise},i.emptyScreen=function(){return r={id:null,template:null,description:"",title:"",orientation:"landscape",width:1920,height:1080,channel_screen_regions:[],options:{}}},i}]),angular.module("ikApp").service("searchFactory",["$q","$rootScope","$http","itkLog",function(e,n,t,i){"use strict";function r(e){a=io.connect(window.config.search.address,{query:"token="+l,"force new connection":!0,"max reconnection attempts":1/0}),a.on("error",function(n){i.error(n,"Search socket error."),e.reject(n)}),a.on("connect",function(){e.resolve("Connected to the server.")}),a.on("disconnect",function(e){})}function o(){var n=e.defer();return void 0===a?null!==l?r(n):t.get("api/auth/search").success(function(e){l=e.token,r(n)}).error(function(e,t){i.error(e,"Authentication (search) to search node failed ("+t+")"),n.reject(t)}):n.resolve("Connected to the server."),n.promise}var a,l=null;this.search=function(n){var t=e.defer(),r={index:window.config.search.index,type:n.type,query:{match_all:{}}};return void 0!==n.text&&""!==n.text&&(r.query={multi_match:{query:n.text,fields:n.fields,analyzer:"string_search"}}),r.sort=n.sort,void 0!==n.filter&&(r.query={filtered:{query:r.query,filter:n.filter}}),n.hasOwnProperty("pager")&&(r.size=n.pager.size,r.from=n.pager.page*n.pager.size),o().then(function(){a.emit("search",r),a.once("result",function(e){t.resolve(e)}),a.once("searchError",function(e){i.error("Search error",e.message),t.reject(e.message)})}),t.promise}}]),angular.module("ikApp").factory("sharedChannelFactory",["$http","$q","sharedSearchFactory",function(e,n,t){"use strict";var i={},r=null;return i.searchChannels=function(e,n){return e.type="Indholdskanalen\\MainBundle\\Entity\\Channel",t.search(e,n)},i.getSharedChannel=function(t,i){var r=n.defer();return e.get("/api/sharing/channel/"+t+"/"+i).success(function(e){r.resolve(e)}).error(function(e,n){r.reject(n)}),r.promise},i.saveSharedChannel=function(t){var i=n.defer();return e.post("/api/sharing/channel",t).success(function(e){i.resolve(e)}).error(function(e,n){i.reject(n)}),i.promise},i.getAvailableIndexes=function(){var t=n.defer();return null!==r?t.resolve(r):e.get("/api/sharing/available_indexes").success(function(e){r=e,t.resolve(e)}).error(function(e,n){t.reject(n)}),t.promise},i.saveSharingIndexes=function(t){var i=n.defer();return e.post("/api/sharing/indexes",t).success(function(e){i.resolve(e)}).error(function(e,n){i.reject(n)}),i.promise},i.getSharingIndexes=function(){var t=n.defer();return e.get("/api/sharing/indexes").success(function(e){t.resolve(e)}).error(function(e,n){t.reject(n)}),t.promise},i}]),angular.module("ikApp").service("sharedSearchFactory",["$q","$rootScope","$http","itkLog",function(e,n,t,i){"use strict";function r(e){a=io.connect(window.config.sharingService.address,{query:"token="+l,"force new connection":!0,"max reconnection attempts":1/0}),a.on("error",function(n){i.error(n,"Search socket error."),e.reject(n)}),a.on("connect",function(){e.resolve("Connected to the server.")}),a.on("disconnect",function(e){})}function o(){var n=e.defer();return void 0===a?null!==l?r(n):t.get("api/auth/sharing").success(function(e){l=e.token,r(n)}).error(function(e,t){i.error(e,"Authentication (sharing) to search node failed ("+t+")"),n.reject(t)}):n.resolve("Connected to the server."),n.promise}var a,l=null;this.search=function(n,t){var r=e.defer(),l={index:t,type:n.type,query:{match_all:{}}};return void 0!==n.text&&""!==n.text&&(l.query={multi_match:{query:n.text,fields:n.fields,analyzer:"string_search"}}),l.sort=n.sort,void 0!==n.filter&&(l.query={filtered:{query:l.query,filter:n.filter}}),n.hasOwnProperty("pager")&&(l.size=n.pager.size,l.from=n.pager.page*n.pager.size),o().then(function(){a.emit("search",l),a.once("result",function(e){r.resolve(e)}),a.once("searchError",function(e){i.error("Search error",e.message),r.reject(e.message)})}),r.promise}}]),angular.module("ikApp").factory("slideFactory",["$http","$q","searchFactory",function(e,n,t){"use strict";var i={},r=null;return i.searchSlides=function(e){return e.type="Indholdskanalen\\MainBundle\\Entity\\Slide",t.search(e)},i.getSlides=function(){var t=n.defer();return e.get("/api/slides").success(function(e,n){t.resolve(e)}).error(function(e,n){t.reject(n)}),t.promise},i.loadSlidesBulk=function(t){for(var i=n.defer(),r="?",o=0;o<t.length;o++)r=r+"ids[]="+t[o],
o<t.length-1&&(r+="&");return e.get("/api/slides/bulk"+r).success(function(e,n){i.resolve(e)}).error(function(e,n){i.reject(n)}),i.promise},i.clearCurrentSlide=function(){r=null},i.getEditSlide=function(t){var i=n.defer();return null===t||void 0===t||""===t?i.resolve(r):null!==r&&r.id==t?i.resolve(r):e.get("/api/slide/"+t).success(function(e,n){r=e,i.resolve(r)}).error(function(e,n){i.reject(n)}),i.promise},i.getSlide=function(t){var i=n.defer();return e.get("/api/slide/"+t).success(function(e,n){i.resolve(e)}).error(function(e,n){i.reject(n)}),i.promise},i.saveSlide=function(){var t=n.defer();return e.post("/api/slide",r).success(function(e){t.resolve(e),r=null}).error(function(e,n){t.reject(n)}),t.promise},i.emptySlide=function(){return r={id:null,published:!0,schedule_from:null,schedule_to:null,media:[],media_type:null,title:"",user:"",duration:"",orientation:"",template:"",options:null}},i}]),angular.module("ikApp").factory("templateFactory",["$q","$http",function(e,n){"use strict";var t={},i=null,r=null;return t.getSlideTemplates=function(){var t=e.defer();return null!==i?t.resolve(i):n.get("/api/templates/slides/enabled").success(function(e){i=e,t.resolve(i)}).error(function(e,n){t.reject(n)}),t.promise},t.getSlideTemplate=function(n){var i=e.defer();return t.getSlideTemplates().then(function(e){for(var t=0;t<e.length;t++)if(e[t].id===n)return void i.resolve(e[t]);i.reject(404)},function(e){i.reject(e)}),i.promise},t.getScreenTemplates=function(){var t=e.defer();return null!==r?t.resolve(r):n.get("/api/templates/screens/enabled").success(function(e){r=e,t.resolve(r)}).error(function(e,n){t.reject(n)}),t.promise},t.getScreenTemplate=function(n){var i=e.defer();return t.getScreenTemplates().then(function(e){for(var t=0;t<e.length;t++)if(e[t].id===n)return void i.resolve(e[t]);i.reject(404)},function(e){i.reject(e)}),i.promise},t.saveEnabledTemplates=function(t,o){var a=e.defer();return n.post("/api/templates/save/enabled",{screens:t,slides:o}).success(function(e,t){n.get("/api/templates/slides/enabled").success(function(e){i=e}).error(function(e,n){}),n.get("/api/templates/screen/enabled").success(function(e){r=e}).error(function(e,n){}),a.resolve(t)}).error(function(e,n){a.reject(n)}),a.promise},t.getAllSlideTemplates=function(){var t=e.defer();return n.get("/api/templates/slides/all").success(function(e){i=e,t.resolve(i)}).error(function(e,n){t.reject(n)}),t.promise},t.getAllScreenTemplates=function(){var t=e.defer();return n.get("/api/templates/screens/all").success(function(e){i=e,t.resolve(i)}).error(function(e,n){t.reject(n)}),t.promise},t}]),angular.module("ikApp").factory("userFactory",["$http","$q",function(e,n){"use strict";var t,i={};return i.getCurrentUser=function(){var i=n.defer();return void 0===t?e.get("/api/user").success(function(e){t=e,i.resolve(e)}).error(function(){i.reject()}):i.resolve(t),i.promise},i}]),function(){"use strict";var e;e=angular.module("itkDateComponent",[]),e.directive("dateComponent",["$interval",function(e){return{restrict:"E",replace:!0,templateUrl:"app/shared/components/date/date.html?"+window.config.version,scope:{theme:"@"},link:function(n){n.thisDate=new Date;var t=e(function(){n.thisDate=new Date},6e4);n.$on("$destroy",function(){angular.isDefined(t)&&(e.cancel(t),t=void 0)})}}}])}.call(this),function(){"use strict";var e;e=angular.module("itkDigitalClockComponent",[]),e.directive("digitalClockComponent",["$interval",function(e){return{restrict:"E",replace:!0,templateUrl:"app/shared/components/digital-clock/digital-clock.html?"+window.config.version,scope:{},link:function(n){n.thisDate=new Date;var t=e(function(){n.thisDate=Date.now()},1e3);n.$on("$destroy",function(){angular.isDefined(t)&&(e.cancel(t),t=void 0)})}}}])}.call(this),angular.module("ikApp").directive("ikActionReloadScreen",["$http","itkLog",function(e,n){"use strict";return{restrict:"E",replace:!1,scope:{id:"@"},link:function(t){t.reloadScreen=function(){var i=window.confirm("Er du sikker på at du vil genindlæse skærmen?");i===!0&&e.post("/api/screen/"+t.id+"/reload").success(function(){n.info("Genindlæsning lykkedes.")}).error(function(e){n.error("Genindlæsning lykkedes ikke!",e)})}},templateUrl:"app/shared/elements/actionReloadScreen/action-reload-screen.html?"+window.config.version}}]),angular.module("ikApp").directive("ikActionsMenu",[function(){"use strict";return{restrict:"E",replace:!1,transclude:!0,scope:{},link:function(e){e.menuOpen=!1,e.toggleMenu=function(){e.menuOpen=!e.menuOpen}},templateUrl:"app/shared/elements/actionsMenu/actions-menu.html?"+window.config.version}}]),angular.module("ikApp").directive("autoGrow",function(){"use strict";return{restrict:"A",scope:{fontSize:"@"},link:function(e,n){var t=$(n),i=function(e){e.css("height","0px");var n=e.prop("scrollHeight"),t=e.css("min-height").replace("px","");e.css("height",Math.max(n,t)+"px")};n.bind("keyup",function(){i(t)}),e.$watch("fontSize",function(e){e&&i(t)}),setTimeout(function(){i(t)},100)}}}),angular.module("ikApp").directive("ikChannel",["$interval","$location",function(e,n){"use strict";return{restrict:"E",scope:{ikWidth:"@",ikChannel:"=",ikSingleSlide:"=",ikClickable:"="},link:function(t,i,r){t.slideIndex=0,t.playText="",r.$observe("ikChannel",function(e){e&&(t.ikChannel.slides.length<=0?t.templateURL="app/shared/elements/channel/empty.html?"+window.config.version:(t.templateURL="app/shared/elements/channel/non-empty.html?"+window.config.version,t.buttonState="play"))}),t.play=function(){angular.isDefined(t.interval)?(e.cancel(t.interval),t.interval=void 0,t.buttonState="play"):(t.slideIndex=(t.slideIndex+1)%t.ikChannel.slides.length,t.interval=e(function(){t.slideIndex=(t.slideIndex+1)%t.ikChannel.slides.length},2e3),t.buttonState="pause")},t.redirectToChannel=function(){t.ikClickable&&n.path("/channel/"+t.ikChannel.id)},t.$on("$destroy",function(){angular.isDefined(t.interval)&&(e.cancel(t.interval),t.interval=void 0)})},templateUrl:"app/shared/elements/channel/channel-template.html?"+window.config.version}}]),angular.module("ikApp").directive("ikChannelOverview",["channelFactory","userFactory","itkLog",function(e,n,t){"use strict";return{restrict:"E",scope:{ikSelectedChannels:"=",ikOverlay:"@"},link:function(i){i.displaySharingOption=window.config.sharingService.enabled,i.loading=!1,i.showFromUser="mine",i.sort={created_at:"desc"},i.pager={size:6,page:0},i.hits=0,i.channels=[];var r={fields:"title",text:"",filter:{bool:{must:[]}},sort:{created_at:{order:"desc"}},pager:i.pager};i.updateSearch=function(){r.text=i.search_text,i.loading=!0,e.searchChannels(r).then(function(n){i.hits=n.hits;for(var r=[],o=0;o<n.results.length;o++)r.push(n.results[o].id);e.loadChannelsBulk(r).then(function(e){i.channels=e,i.loading=!1},function(e){t.error("Kunne ikke loade søgeresultatet.",e),i.loading=!1})})},i.$on("channel-deleted",function(){i.updateSearch()}),i.channelSelected=function(e){if(!i.ikSelectedChannels)return!1;var n=!1;return i.ikSelectedChannels.forEach(function(t){t.id===e.id&&(n=!0)}),n},i.channelOverviewClickChannel=function(e){i.$emit("channelOverview.clickChannel",e)},i.setUser=function(e){i.showFromUser!==e&&(i.showFromUser=e,i.setSearchFilters())},i.setSearchFilters=function(){delete r.filter,"all"!==i.showFromUser&&(r.filter={bool:{must:[]}});var e={};"all"!==i.showFromUser&&(e.term={user:i.currentUser.id},r.filter.bool.must.push(e)),i.updateSearch()},i.setSort=function(e,n){(void 0===i.sort[e]||i.sort[e]!==n)&&(i.sort={},i.sort[e]=n,r.sort={},r.sort[e]={order:n},i.updateSearch())},n.getCurrentUser().then(function(e){i.currentUser=e,i.setSearchFilters()})},templateUrl:"/app/shared/elements/channelOverview/channel-overview-directive.html?"+window.config.version}}]),angular.module("ikApp").directive("ikChannelShare",[function(){"use strict";return{restrict:"E",scope:{ikChannel:"="},link:function(e){e.clickShare=function(){e.$emit("ikChannelShare.clickShare",e.ikChannel)}},templateUrl:"app/shared/elements/channelShare/channel-share.html?"+window.config.version}}]),angular.module("ikApp").directive("ikChecklist",[function(){"use strict";return{restrict:"E",replace:!1,scope:{elements:"=",selected:"=",identity:"="},link:function(e){e.toggleElement=function(n){if(e.selected){var t=-1;e.selected.forEach(function(i,r){i[e.identity]===n[e.identity]&&(t=r)}),t>-1?e.selected.splice(t,1):e.selected.push(n)}},e.elementSelected=function(n){if(!e.selected)return!1;for(var t=0;t<e.selected.length;t++)if(e.selected[t][e.identity]===n[e.identity])return!0;return!1}},templateUrl:"app/shared/elements/checklist/checklist.html?"+window.config.version}}]),function(){"use strict";var e;e=angular.module("itkControlPanel",[]),e.directive("controlPanel",function(){return{restrict:"E",scope:{template:"=",data:"=",display:"=",saveAction:"&",region:"=",options:"="},replace:!0,link:function(e){e.selectedTab=null,$("html").addClass("is-locked"),e.getContent=function(){return e.template},e.clickTab=function(n){e.selectedTab=n},e.toggleChannelType=function(n){e.channelType=n},e.$on("$destroy",function(){document.getElementsByTagName("body")[0].style.overflow=""})},template:'<div data-ng-include="getContent()"></div>'}})}.call(this),angular.module("ikApp").directive("ikDelete",["$http","$rootScope","itkLog",function(e,n,t){"use strict";return{restrict:"E",replace:!1,scope:{id:"@",type:"@"},link:function(i){i.remove=function(){var r=window.confirm("Er du sikker på du vil slette dette? Handlingen kan ikke fortrydes.");r===!0&&e["delete"]("/api/"+i.type+"/"+i.id).success(function(){t.info("Sletning lykkedes."),n.$broadcast(i.type+"-deleted",{})}).error(function(e){t.error("Sletning lykkes ikke!",e)})}},templateUrl:"app/shared/elements/delete/delete.html?"+window.config.version}}]),angular.module("ikApp").directive("includeReplace",function(){"use strict";return{require:"ngInclude",restrict:"A",link:function(e,n){n.replaceWith(n.children())}}}),angular.module("ikApp").directive("ikMediaOverview",["itkLog",function(e){"use strict";return{restrict:"E",scope:{ikMediaType:"@",ikAutoSearch:"@",ikHideFilters:"=",ikSelectedMedia:"="},controller:["$scope","mediaFactory","userFactory",function(n,t,i){n.sort={created_at:"desc"},n.showFromUser="mine",n.loading=!1,n.search_text="",n.media_type="all",n.media=[],n.pager={size:6,page:0},n.hits=0;var r={fields:"name",text:"",sort:{created_at:{order:"desc"}},pager:n.pager};n.updateSearch=function(){r.text=n.search_text,n.loading=!0,t.searchMedia(r).then(function(i){n.hits=i.hits;for(var r=[],o=0;o<i.results.length;o++)r.push(i.results[o].id);t.loadMediaBulk(r).then(function(e){n.media=e,n.loading=!1},function(t){e.error("Hentning af søgeresultater fejlede.",t),n.loading=!1})})},n.mediaSelected=function(e){if(!n.ikSelectedMedia)return!1;var t=!1;return n.ikSelectedMedia.forEach(function(n){n.id===e.id&&(t=!0)}),t},n.filterMediaType=function(e){n.media_type!==e&&(n.media_type=e,n.setSearchFilters())},n.setSearchFilters=function(){i.getCurrentUser().then(function(e){if(n.currentUser=e,delete r.filter,("all"!==n.media_type||"all"!==n.showFromUser)&&(r.filter={bool:{must:[]}}),"all"!==n.media_type){var t={};t.term={media_type:n.media_type},r.filter.bool.must.push(t)}if("all"!==n.showFromUser){var t={};t.term={user:n.currentUser.id},r.filter.bool.must.push(t)}n.updateSearch()})},n.setUser=function(e){n.showFromUser!==e&&(n.showFromUser=e,n.setSearchFilters())},n.setSort=function(e,t){(void 0===n.sort[e]||n.sort[e]!==t)&&(n.sort={},n.sort[e]=t,r.sort={},r.sort[e]={order:t},n.updateSearch())},n.mediaOverviewClickMedia=function(e){n.$emit("mediaOverview.selectMedia",e)},n.$on("mediaOverview.updateSearch",function(e){n.updateSearch(),e.preventDefault()})}],link:function(e,n,t){t.$observe("ikMediaType",function(n){n&&n!=e.media_type&&e.filterMediaType(n)}),t.$observe("ikAutoSearch",function(n){"true"===e.ikAutoSearch&&e.setSearchFilters()})},templateUrl:"/app/shared/elements/mediaOverview/media-overview-directive.html?"+window.config.version}}]),angular.module("ikApp").directive("ikMediaUpload",[function(){"use strict";return{restrict:"E",scope:{ikUploadType:"@"},controller:["$scope","FileUploader",function(e,n){e.currentStep=1,e.uploadComplete=!1,e.uploadErrors=!1,e.uploadInProgress=!1,e.uploadErrorText="";var t="|mp4|x-msvideo|x-ms-wmv|quicktime|mpeg|mpg|x-matroska|ogg|webm",i="|jpg|png|jpeg|bmp|gif",r="";r="image"===e.ikUploadType||"logo"===e.ikUploadType?i:"video"===e.ikUploadType?t:t+i,e.uploader=new n({url:"/api/media",queueLimit:1,filters:[{name:"mediaFilter",fn:function(e){var n="|"+e.type.slice(e.type.lastIndexOf("/")+1);return-1!==r.indexOf(n)}}]}),e.selectFiles=function(){angular.element(document.querySelector("#select-files")).click()},e.clearQueue=function(){e.uploader.clearQueue(),e.uploadComplete=!1,e.uploadErrors=!1,e.currentStep=1,e.uploadErrorText=""},e.removeItem=function(n){n.remove(),e.uploader.queue.length<=0&&(e.currentStep=1,e.uploadComplete=!1,e.uploadErrors=!1)},e.upload=function(){e.uploadInProgress=!0,e.uploader.uploadAll()},e.isImage=function(e){var n="|"+e.type.slice(e.type.lastIndexOf("/")+1);return-1!==i.indexOf(n)},e.getProgress=function(){return e.uploader.progress?e.uploadInProgress&&e.uploader.progress>5?e.uploader.progress-5:e.uploader.progress:void 0},e.uploader.onAfterAddingFile=function(n){n.formData=[{title:"",logo:!1}],"logo"===e.ikUploadType&&(n.formData[0].logo=!0)},e.uploader.onAfterAddingAll=function(){e.currentStep++},e.uploader.onErrorItem=function(n,t,i){e.uploadErrors=!0,e.uploadInProgress=!1,413===i?e.uploadErrorText="Filen var for stor (fejlkode: 413)":e.uploadErrorText="Der skete en fejl (fejlkode: "+i+")"},e.uploader.onCompleteAll=function(){e.uploadComplete=!0,e.uploadInProgress=!1},e.uploader.onSuccessItem=function(n,t){e.$emit("mediaUpload.uploadSuccess",{image:n,id:t[0],queue:e.uploader.queue})}}],link:function(){},templateUrl:"/app/shared/elements/mediaUpload/media-upload-directive.html?"+window.config.version}}]),function(){"use strict";var e;e=angular.module("ngModal",[]),e.directive("modalDialog",[function(){return{restrict:"E",scope:{show:"=",onClose:"&?"},replace:!0,transclude:!0,link:function(e){e.hideModal=function(){e.show=!1},e.$watch("show",function(n,t){return n&&!t?document.getElementsByTagName("body")[0].style.overflow="hidden":document.getElementsByTagName("body")[0].style.overflow="",!n&&t&&null!==e.onClose?e.onClose():void 0})},templateUrl:"app/shared/elements/ngModal/ng-modal.html?"+window.config.version}}])}.call(this),angular.module("ikApp").directive("ikPager",[function(){"use strict";return{restrict:"E",replace:!0,scope:!0,controller:["$scope",function(e){e.pagesFrom=0,e.pagesPerLine=10,e.changePage=function(n){e.pager.page=n,e.updateSearch(),e.pagesFrom=Math.floor(e.pager.page/e.pagesPerLine)*e.pagesPerLine},e.prevPage=function(){e.pager.page>0&&(e.pager.page--,e.updateSearch()),e.pager.page<e.pagesFrom&&(e.pagesFrom=e.pagesFrom-e.pagesPerLine)},e.nextPage=function(){e.pager.page<e.pager.max-1&&(e.pager.page++,e.updateSearch()),e.pager.page===e.pagesFrom+e.pagesPerLine&&(e.pagesFrom=e.pagesFrom+e.pagesPerLine)},e.prevLine=function(){e.pager.page>0&&(e.pager.page=e.pager.page-e.pagesPerLine,e.pager.page<0&&(e.pager.page=0),e.updateSearch()),e.pagesFrom=Math.floor(e.pager.page/e.pagesPerLine)*e.pagesPerLine},e.nextLine=function(){e.pager.page<e.pager.max-1&&(e.pager.page=e.pager.page+e.pagesPerLine,e.pager.page>=e.pager.max&&(e.pager.page=e.pager.max-1),e.updateSearch()),e.pagesFrom=Math.floor(e.pager.page/e.pagesPerLine)*e.pagesPerLine},e.$watch("hits",function(n){var t=[];if(e.pager.max=0,n>e.pager.size){e.pager.max=Math.ceil(n/e.pager.size);for(var i=0;i<e.pager.max;i++)t.push(i)}e.pager.pages=t})}],templateUrl:"/app/shared/elements/pager/pager-directive.html?"+window.config.version}}]),angular.module("ikApp").directive("ikScreen",[function(){"use strict";return{restrict:"E",scope:{ikScreen:"="},link:function(e,n,t){t.$observe("ikScreen",function(n){n&&("landscape"===e.ikScreen.template.orientation?e.style={width:"300px",height:"168.5px"}:e.style={height:"300px",width:"168.5px"})})},templateUrl:"app/shared/elements/screen/screen-template.html?"+window.config.version}}]),angular.module("ikApp").directive("ikSharedChannel",["$interval","$location","cssInjector",function(e,n,t){"use strict";return{restrict:"E",scope:{ikWidth:"@",ikChannel:"=",ikSingleSlide:"@",ikSharingIndex:"=",ikClickable:"="},link:function(i){i.slideIndex=0,i.playText="",i.$watch("ikChannel",function(e){e&&(i.ikChannel.slides.length<=0?i.templateURL="app/shared/elements/sharedChannel/empty-channel.html?"+window.config.version:(i.templateURL="app/shared/elements/sharedChannel/non-empty-channel.html?"+window.config.version,i.buttonState="play"),i.ikChannel.slides.forEach(function(e){t.add(e.css_path)}))}),i.play=function(){angular.isDefined(i.interval)?(e.cancel(i.interval),i.interval=void 0,i.buttonState="play"):(i.slideIndex=(i.slideIndex+1)%i.ikChannel.slides.length,i.interval=e(function(){i.slideIndex=(i.slideIndex+1)%i.ikChannel.slides.length},2e3),i.buttonState="pause")},i.redirectToChannel=function(){i.ikClickable&&n.path("/shared-channel/"+i.ikChannel.unique_id+"/"+i.ikSharingIndex)},i.$on("$destroy",function(){angular.isDefined(i.interval)&&(e.cancel(i.interval),i.interval=void 0)})},templateUrl:"app/shared/elements/sharedChannel/shared-channel-template.html?"+window.config.version}}]),angular.module("ikApp").directive("ikSharedSlide",["cssInjector",function(e){"use strict";return{restrict:"E",scope:{ikWidth:"@",ikSlide:"="},link:function(n,t,i){n.templateURL="/app/shared/elements/slide/slide-loading.html?"+window.config.version,i.$observe("ikSlide",function(t){t&&(e.add(n.ikSlide.css_path),n.ikSlide.media_thumbs&&n.ikSlide.media_thumbs.length>0&&(n.ikSlide.currentImage=n.ikSlide.media_thumbs[0]),n.ikSlide.currentLogo=n.ikSlide.logo,n.templateURL=n.ikSlide.preview_path,n.theStyle={width:""+n.ikWidth+"px",height:""+parseFloat(1080*parseFloat(n.ikWidth/1920))+"px"},n.ikSlide.options.fontsize&&(n.theStyle.fontsize=""+parseFloat(n.ikSlide.options.fontsize*parseFloat(n.ikWidth/1920))+"px"))})},template:'<div class="preview--slide" data-ng-include="" src="templateURL"></div>'}}]),angular.module("ikApp").directive("ikSlide",["slideFactory","templateFactory","itkLog",function(e,n,t){"use strict";return{restrict:"E",scope:{ikWidth:"@",ikSlide:"="},link:function(e,i,r){e.templateURL="/app/shared/elements/slide/slide-loading.html?"+window.config.version,r.$observe("ikSlide",function(i){i&&("image"===e.ikSlide.media_type?e.ikSlide.media.length>0?e.ikSlide.currentImage=e.ikSlide.media[0].urls.default_landscape_small:e.ikSlide.currentImage="":e.ikSlide.media.length>0&&e.ikSlide.media[0].provider_metadata.length>0?e.ikSlide.currentImage=e.ikSlide.media[0].provider_metadata[0].thumbnails[1].reference:e.ikSlide.currentImage="",void 0!==e.ikSlide.logo&&null!==e.ikSlide.logo?e.ikSlide.currentLogo=e.ikSlide.logo.urls.default_landscape:e.ikSlide.currentLogo="",n.getSlideTemplate(e.ikSlide.template).then(function(n){e.template=n,e.templateURL=e.template.paths.preview,e.theStyle={width:""+e.ikWidth+"px",height:""+parseFloat(e.template.ideal_dimensions.height*parseFloat(e.ikWidth/e.template.ideal_dimensions.width))+"px"},e.ikSlide.options.fontsize&&(e.theStyle.fontsize=""+parseFloat(e.ikSlide.options.fontsize*parseFloat(e.ikWidth/e.template.ideal_dimensions.width))+"px")},function(e){t.error("Hentning af templates fejlede.",e)}))})},template:'<div class="preview--slide" data-ng-style="{\'width\': theStyle.width}" data-ng-include="" src="templateURL"></div>'}}]),angular.module("ikApp").directive("ikSlideEditable",["templateFactory","itkLog",function(e,n){"use strict";return{restrict:"E",scope:{ikWidth:"@",ikSlide:"="},link:function(t,i,r){t.templateURL="/app/shared/elements/slide/slide-loading.html?"+window.config.version,t.$watch("ikSlide",function(r,o){r&&("image"===t.ikSlide.media_type?(t.ikSlide.currentImage="",t.ikSlide.media.length>0&&(t.ikSlide.currentImage=t.ikSlide.media[0].urls.default_landscape)):"video"===t.ikSlide.media_type&&(t.ikSlide.currentVideo={mp4:"",ogg:"",webm:""},t.ikSlide.media.length>0&&void 0!==t.ikSlide.media[0]&&(t.ikSlide.media.length>0&&t.ikSlide.media[0].provider_metadata.length>0&&(t.ikSlide.currentVideo={},t.ikSlide.media[0].provider_metadata[0]&&(t.ikSlide.currentVideo.mp4=t.ikSlide.media[0].provider_metadata[0].reference),t.ikSlide.media[0].provider_metadata[1]&&(t.ikSlide.currentVideo.ogg=t.ikSlide.media[0].provider_metadata[1].reference),t.ikSlide.media[0].provider_metadata[2]&&(t.ikSlide.currentVideo.webm=t.ikSlide.media[0].provider_metadata[2].reference)),setTimeout(function(){i.find("#videoPlayer").load()},1e3))),t.ikSlide.currentLogo="",void 0!==t.ikSlide.logo&&null!==t.ikSlide.logo&&(t.ikSlide.currentLogo=t.ikSlide.logo.urls.default_landscape),t.template&&r.template===o.template||e.getSlideTemplate(t.ikSlide.template).then(function(e){t.template=e,t.templateURL=t.template.paths.edit,t.theStyle={width:""+t.ikWidth+"px",height:""+parseFloat(t.template.ideal_dimensions.height*parseFloat(t.ikWidth/t.template.ideal_dimensions.width))+"px",fontsize:""+parseFloat(t.ikSlide.options.fontsize*parseFloat(t.ikWidth/t.template.ideal_dimensions.width))+"px"}},function(e){n.error("Hentning af template fejlede.",e)}),t.theStyle&&(t.theStyle.fontsize=""+parseFloat(t.ikSlide.options.fontsize*parseFloat(t.ikWidth/t.template.ideal_dimensions.width))+"px"))},!0)},templateUrl:"/app/shared/elements/slide/slide-edit.html?"+window.config.version}}]),angular.module("ikApp").directive("sharedChannelOverview",["sharedChannelFactory","userFactory","$timeout","itkLog",function(e,n,t,i){"use strict";return{restrict:"E",scope:{ikSelectedChannels:"=",ikOverlay:"@",ikSingleSlide:"="},link:function(t){t.index={},t.loading=!1,t.pickIndexDialog=!1,t.displaySharingOption=window.config.sharingService.enabled,t.sharingIndexes=[],e.getSharingIndexes().then(function(e){t.sharingIndexes=e}),t.showFromUser="mine",t.sort={created_at:"desc"},n.getCurrentUser().then(function(e){t.currentUser=e},function(e){i.error("Kunne ikke loade bruger",e)}),t.pager={size:6,page:0},t.hits=0,t.channels=[];var r={fields:"title",text:"",filter:{bool:{must:{}}},sort:{created_at:{order:"desc"}},pager:t.pager};t.updateSearch=function(){return r.text=t.search_text,angular.isUndefined(t.index.index)?void i.info("Du skal vælge et indeks først",3e3):(t.loading=!0,void e.searchChannels(r,t.index.index).then(function(e){t.loading=!1,t.hits=e.hits,t.channels=e.results},function(e){t.loading=!1,i.error("Hentning af søgeresultater fejlede.",e)}))},t.$on("channel-deleted",function(){t.updateSearch()}),t.channelSelected=function(e){if(!t.ikSelectedChannels)return!1;var n=!1;return t.ikSelectedChannels.forEach(function(t){t.unique_id==e.unique_id&&(n=!0)}),n},t.clickSharedChannel=function(e,n){t.$emit("channelSharingOverview.clickSharedChannel",e,n)},t.setIndex=function(e){t.index=e,t.pickIndexDialog=!1,t.updateSearch()},t.setUser=function(e){t.showFromUser!==e&&(t.showFromUser=e,t.updateSearch())},t.setSearchFilters=function(){if(delete r.filter,"all"!==t.showFromUser&&(r.filter={bool:{must:[]}}),"all"!==t.showFromUser){var e={};e.term={user:t.currentUser.id},r.filter.bool.must.push(e)}t.updateSearch()},t.setSort=function(e,n){(void 0===t.sort[e]||t.sort[e]!==n)&&(t.sort={},t.sort[e]=n,r.sort={},r.sort[e]={order:n},t.updateSearch())}},templateUrl:"/app/shared/elements/sharedChannelOverview/shared-channel-overview.html?"+window.config.version}}]),angular.module("ikApp").directive("ikSlideOverview",["itkLog",function(e){"use strict";return{restrict:"E",scope:{ikSelectedSlides:"=",ikOverlay:"@"},controller:["$scope","slideFactory","userFactory",function(n,t,i){n.loading=!1,n.showFromUser="mine",n.sort={created_at:"desc"},n.pager={size:6,page:0},n.hits=0,n.slides=[];var r={fields:["title"],text:n.search_text,sort:{created_at:{order:"desc"}},pager:n.pager};n.updateSearch=function(){r.text=n.search_text,n.loading=!0,t.searchSlides(r).then(function(i){n.hits=i.hits;for(var r=[],o=0;o<i.results.length;o++)r.push(i.results[o].id);t.loadSlidesBulk(r).then(function(e){n.slides=e,n.loading=!1},function(t){n.loading=!1,e.error("Hentning af søgeresultater fejlede.",t)})})},n.$on("slide-deleted",function(e){n.updateSearch()}),n.setUser=function(e){n.showFromUser!==e&&(n.showFromUser=e,n.setSearchFilters())},n.setSearchFilters=function(){if(delete r.filter,"all"!==n.showFromUser&&(r.filter={bool:{must:[]}}),"all"!==n.showFromUser){var e={};e.term={user:n.currentUser.id},r.filter.bool.must.push(e)}n.updateSearch()},n.slideSelected=function(e){if(!n.ikSelectedSlides)return!1;var t=!1;return n.ikSelectedSlides.forEach(function(n,i){n.id==e.id&&(t=!0)}),t},n.outOfSchedule=function(e){return e.schedule_from&&e.schedule_to?1e3*e.schedule_from<Date.now()&&1e3*e.schedule_to>Date.now()?!1:!0:!1},n.setSort=function(e,t){(void 0===n.sort[e]||n.sort[e]!==t)&&(n.sort={},n.sort[e]=t,r.sort={},r.sort[e]={order:t},n.updateSearch())},n.slideOverviewClickSlide=function(e){n.$emit("slideOverview.clickSlide",e)},i.getCurrentUser().then(function(e){n.currentUser=e,n.setSearchFilters()})}],templateUrl:"/app/shared/elements/slideOverview/slide-overview-directive.html?"+window.config.version}}]),angular.module("ikApp").directive("ikThumb",["$window",function(e){"use strict";var n={support:!(!e.FileReader||!e.CanvasRenderingContext2D),isFile:function(n){return angular.isObject(n)&&n instanceof e.File},isImage:function(e){var n="|"+e.type.slice(e.type.lastIndexOf("/")+1);return-1!=="|jpg|png|jpeg|bmp|gif|".indexOf(n)}};return{restrict:"A",template:"<canvas/>",link:function(e,t,i){function r(e){var n=new Image;n.onload=o,n.src=e.target.result}function o(){var e=a.width?a.width:this.width/this.height*a.height,n=a.height?a.height:this.height/this.width*a.width;l.attr({width:e,height:n}),l[0].getContext("2d").drawImage(this,0,0,e,n)}if(n.support){var a=e.$eval(i.ikThumb);if(n.isFile(a.file)&&n.isImage(a.file)){var l=t.find("canvas"),s=new FileReader;s.onload=r,s.readAsDataURL(a.file)}}}}}]),function(){"use strict";var e;e=angular.module("itkChannelPickerWidget",[]),e.directive("channelPickerWidget",["userFactory","channelFactory","itkLog",function(e,n,t){return{restrict:"E",replace:!0,templateUrl:"app/shared/widgets/channelPickerWidget/channel-picker-widget.html?"+window.config.version,scope:{screen:"=",region:"="},link:function(i){i.sharingEnabled=window.config.sharingService.enabled,i.loading=!1,i.showFromUser="all",i.sort={created_at:"desc"},e.getCurrentUser().then(function(e){i.currentUser=e},function(e){t.error("Kunne ikke hente bruger",e)}),i.pager={size:5,page:0},i.hits=0,i.channels=[];var r={fields:"title",text:"",filter:{bool:{must:[]}},sort:{created_at:{order:"desc"}},pager:i.pager};i.updateSearch=function(){r.text=i.search_text,i.loading=!0,n.searchChannels(r).then(function(e){i.hits=e.hits;for(var r=[],o=0;o<e.results.length;o++)r.push(e.results[o].id);n.loadChannelsBulk(r).then(function(e){i.channels=e,i.loading=!1},function(e){t.error("Kunne ikke hente søgeresultater",e),i.loading=!1})})},i.channelSelected=function(e){for(var n,t=0;t<i.screen.channel_screen_regions.length;t++)if(n=i.screen.channel_screen_regions[t],n.channel&&n.channel.id===e.id&&n.region===i.region)return!0;return!1},i.addChannel=function(e){i.screen.channel_screen_regions.push({id:null,screen_id:i.screen.id,channel:e,region:i.region})},i.removeChannel=function(e){for(var n,t=0;t<i.screen.channel_screen_regions.length;t++)n=i.screen.channel_screen_regions[t],n.channel&&n.channel.id===e.id&&n.region===i.region&&i.screen.channel_screen_regions.splice(t,1)},i.$watch("screen",function(e){e&&i.updateSearch()})}}}])}.call(this),function(){"use strict";var e;e=angular.module("itkChannelRemoverWidget",[]),e.directive("channelRemoverWidget",[function(){return{restrict:"E",replace:!0,templateUrl:"app/shared/widgets/channelRemoverWidget/channel-remover-widget.html?"+window.config.version,scope:{screen:"=",region:"="},link:function(e){e.search_text="",e.getSearch=function(){return{title:e.search_text}},e.removeChannel=function(n){for(var t,i=0;i<e.screen.channel_screen_regions.length;i++)t=e.screen.channel_screen_regions[i],void 0===t.shared_channel&&t.channel.id===n.id&&t.region===e.region?e.screen.channel_screen_regions.splice(i,1):t.shared_channel&&t.shared_channel.unique_id===n.unique_id&&t.region===e.region&&e.screen.channel_screen_regions.splice(i,1)}}}}])}.call(this),function(){"use strict";var e;e=angular.module("itkNumberWidget",[]),e.directive("numberWidget",function(){return{restrict:"E",scope:{field:"=",placeholderText:"@"},replace:!0,template:'<input type="number" class="cpw--text-input" placeholder="{{placeholderText}}" data-ng-model="field">'}})}.call(this),function(){"use strict";var e;e=angular.module("itkRegionPreviewWidget",[]),e.directive("regionPreviewWidget",[function(){return{restrict:"E",scope:{region:"=",screen:"=",width:"="},replace:!1,templateUrl:"app/shared/widgets/regionPreviewWidget/region-preview-widget.html?"+window.config.version,link:function(e){e.getNumberOfChannels=function(){for(var n=0,t=0;t<e.screen.channel_screen_regions.length;t++)e.screen.channel_screen_regions[t].region===e.region&&n++;return n}}}}])}.call(this),function(){"use strict";var e;e=angular.module("itkScreenTemplatePickerWidget",[]),e.directive("screenTemplatePickerWidget",["templateFactory","itkLog",function(e,n){return{restrict:"E",scope:{screen:"="},replace:!0,link:function(t){t.templates=[],e.getScreenTemplates().then(function(e){t.templates=e},function(e){n.error("Kunne ikke loade templates",e)}),t.pickTemplate=function(e){t.screen.template=angular.copy(e)}},templateUrl:"app/shared/widgets/screenTemplatePickerWidget/screenTemplatePickerWidget.html?"+window.config.version}}])}.call(this),function(){"use strict";var e;e=angular.module("itkSharedChannelPickerWidget",[]),e.directive("sharedChannelPickerWidget",["sharedChannelFactory","itkLog",function(e,n){return{restrict:"E",replace:!0,templateUrl:"app/shared/widgets/sharedChannelPickerWidget/shared-channel-picker-widget.html?"+window.config.version,scope:{screen:"=",region:"="},link:function(t,i,r){t.index=null,t.loading=!1,t.pickIndexDialog=!1,t.sharingIndexes=[],e.getSharingIndexes().then(function(e){t.sharingIndexes=e},function(e){n.error("Kunne ikke hente delingsindeks",e)}),t.showFromUser="all",t.sort={created_at:"desc"},t.pager={size:9,page:0},t.hits=0,t.channels=[];var o={fields:"title",text:"",filter:{bool:{must:[]}},sort:{created_at:{order:"desc"}},pager:t.pager};t.updateSearch=function(){null!==t.index&&(o.text=t.search_text,t.loading=!0,e.searchChannels(o,t.index.index).then(function(e){t.loading=!1,t.hits=e.hits,t.channels=e.results},function(e){n.error("Kunne ikke hente søgeresultater",e),t.loading=!1}))},t.setIndex=function(e){t.index=e,t.pickIndexDialog=!1,t.updateSearch()},t.channelSelected=function(e){for(var n,i=0;i<t.screen.channel_screen_regions.length;i++)if(n=t.screen.channel_screen_regions[i],n.shared_channel&&n.shared_channel.unique_id===e.unique_id&&n.region===t.region)return!0;return!1},t.addChannel=function(e){(void 0===e.index||null===e.index)&&(e.index=t.index.index),t.screen.channel_screen_regions.push({id:null,screen_id:t.screen.id,shared_channel:e,region:t.region})},t.removeChannel=function(e){for(var n,i=0;i<t.screen.channel_screen_regions.length;i++)n=t.screen.channel_screen_regions[i],n.shared_channel&&n.shared_channel.unique_id===e.unique_id&&n.region===t.region&&t.screen.channel_screen_regions.splice(i,1)},r.$observe("screen",function(e){e&&t.updateSearch()})}}}])}.call(this),function(){"use strict";var e;e=angular.module("itkTextAreaWidget",[]),e.directive("textAreaWidget",function(){return{restrict:"E",scope:{field:"=",placeholderText:"@"},replace:!0,template:'<textarea class="cpw--textarea-input" data-ng-model="field" placeholder="{{placeholderText}}"></textarea>'}})}.call(this),function(){"use strict";var e;e=angular.module("itkTextWidget",[]),e.directive("textWidget",function(){return{
restrict:"E",scope:{field:"=",placeholderText:"@"},replace:!0,template:'<input type="text" class="cpw--text-input" placeholder="{{placeholderText}}" data-ng-model="field">'}})}.call(this);